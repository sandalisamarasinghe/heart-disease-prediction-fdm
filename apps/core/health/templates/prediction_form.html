{% extends 'index.html' %}
{% load static %}
{% block body %}
    <!-- Main Content -->
    <main class="main-content">
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card-modern">
                        <div class="card-header text-center">
                            <h2 class="card-title text-primary">
                                <i class="fas fa-heartbeat me-2"></i>Heart Disease Prediction
                            </h2>
                            <p class="card-subtitle text-muted">
                                Get your heart disease risk assessment instantly - No account required!
                            </p>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Guest Mode:</strong> You can use this prediction tool without creating an account. 
                                For saving your results and tracking history, please <a href="{% url 'signup' %}" class="alert-link">create a free account</a>.
                            </div>
                            
                            <form method="POST" class="needs-validation" novalidate>
                                {% csrf_token %}
                                
                                <div class="row">
                                    <!-- Age -->
                                    <div class="col-md-6 mb-3">
                                        <label for="age" class="form-label">Age *</label>
                                        <input type="number" class="form-control" id="age" name="age" required min="18" max="100" placeholder="18 - 100" data-bs-toggle="tooltip" title="Age of the patient in years">
                                        <div class="invalid-feedback">Please enter a valid age between 18-100.</div>
                                    </div>
                                    
                                    <!-- Gender -->
                                    <div class="col-md-6 mb-3">
                                        <label for="sex" class="form-label">Gender *</label>
                                        <select class="form-select" id="sex" name="sex" required data-bs-toggle="tooltip" title="Select your biological sex">
                                            <option value="">Select Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                        <div class="invalid-feedback">Please select your gender.</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- Chest Pain Type -->
                                    <div class="col-md-6 mb-3">
                                        <label for="cp" class="form-label">Chest Pain Type *</label>
                                        <select class="form-select" id="cp" name="cp" required data-bs-toggle="tooltip" title="Type of chest pain experienced">
                                            <option value="">Select Type</option>
                                            <option value="0">Typical Angina</option>
                                            <option value="1">Atypical Angina</option>
                                            <option value="2">Non-anginal Pain</option>
                                            <option value="3">Asymptomatic</option>
                                        </select>
                                        <div class="invalid-feedback">Please select chest pain type.</div>
                                    </div>
                                    
                                    <!-- Resting Blood Pressure -->
                                    <div class="col-md-6 mb-3">
                                        <label for="trestbps" class="form-label">Resting BP (mmHg) *</label>
                                        <input type="number" class="form-control" id="trestbps" name="trestbps" required min="90" max="200" placeholder="90 - 200" data-bs-toggle="tooltip" title="Resting blood pressure in mmHg">
                                        <div class="invalid-feedback">Please enter valid blood pressure (90-200 mmHg).</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- Cholesterol -->
                                    <div class="col-md-6 mb-3">
                                        <label for="chol" class="form-label">Cholesterol (mg/dl) *</label>
                                        <input type="number" class="form-control" id="chol" name="chol" required min="100" max="600" placeholder="100 - 600" data-bs-toggle="tooltip" title="Serum cholesterol in mg/dl">
                                        <div class="invalid-feedback">Please enter valid cholesterol level (100-600 mg/dl).</div>
                                    </div>
                                    
                                    <!-- Fasting Blood Sugar -->
                                    <div class="col-md-6 mb-3">
                                        <label for="fbs" class="form-label">Fasting Blood Sugar *</label>
                                        <select class="form-select" id="fbs" name="fbs" required data-bs-toggle="tooltip" title=">= 120 mg/dl considered high">
                                            <option value="">Select Status</option>
                                            <option value="No">Normal (< 120 mg/dl)</option>
                                            <option value="Yes">High (â‰¥ 120 mg/dl)</option>
                                        </select>
                                        <div class="invalid-feedback">Please select blood sugar status.</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- ECG Results -->
                                    <div class="col-md-6 mb-3">
                                        <label for="restecg" class="form-label">ECG Results *</label>
                                        <select class="form-select" id="restecg" name="restecg" required data-bs-toggle="tooltip" title="Resting electrocardiographic results">
                                            <option value="">Select Result</option>
                                            <option value="0">Normal</option>
                                            <option value="1">ST-T Wave Abnormality</option>
                                            <option value="2">Left Ventricular Hypertrophy</option>
                                        </select>
                                        <div class="invalid-feedback">Please select ECG result.</div>
                                    </div>
                                    
                                    <!-- Max Heart Rate -->
                                    <div class="col-md-6 mb-3">
                                        <label for="thalach" class="form-label">Max Heart Rate *</label>
                                        <input type="number" class="form-control" id="thalach" name="thalach" required min="60" max="202" placeholder="60 - 202" data-bs-toggle="tooltip" title="Maximum heart rate achieved during exercise">
                                        <div class="invalid-feedback">Please enter valid heart rate (60-202 bpm).</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- Exercise Angina -->
                                    <div class="col-md-6 mb-3">
                                        <label for="exang" class="form-label">Exercise Angina *</label>
                                        <select class="form-select" id="exang" name="exang" required data-bs-toggle="tooltip" title="Exercise induced angina">
                                            <option value="">Select Status</option>
                                            <option value="No">No</option>
                                            <option value="Yes">Yes</option>
                                        </select>
                                        <div class="invalid-feedback">Please select exercise angina status.</div>
                                    </div>
                                    
                                    <!-- ST Depression -->
                                    <div class="col-md-6 mb-3">
                                        <label for="oldpeak" class="form-label">ST Depression *</label>
                                        <input type="number" class="form-control" id="oldpeak" name="oldpeak" required step="0.1" min="-2.6" max="6.2" placeholder="-2.6 to 6.2" data-bs-toggle="tooltip" title="ST depression induced by exercise relative to rest">
                                        <div class="invalid-feedback">Please enter valid ST depression (-2.6 to 6.2).</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- ST Slope -->
                                    <div class="col-md-6 mb-3">
                                        <label for="slope" class="form-label">ST Slope *</label>
                                        <select class="form-select" id="slope" name="slope" required data-bs-toggle="tooltip" title="Slope of the peak exercise ST segment">
                                            <option value="">Select Slope</option>
                                            <option value="0">Upsloping</option>
                                            <option value="1">Flat</option>
                                            <option value="2">Downsloping</option>
                                        </select>
                                        <div class="invalid-feedback">Please select ST slope.</div>
                                    </div>
                                    
                                    <!-- Major Vessels -->
                                    <div class="col-md-6 mb-3">
                                        <label for="ca" class="form-label">Major Vessels *</label>
                                        <select class="form-select" id="ca" name="ca" required data-bs-toggle="tooltip" title="Number of major vessels colored by fluoroscopy">
                                            <option value="">Select Count</option>
                                            <option value="0">0</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                        </select>
                                        <div class="invalid-feedback">Please select major vessel count.</div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- Thalassemia -->
                                    <div class="col-md-6 mb-3">
                                        <label for="thal" class="form-label">Thalassemia *</label>
                                        <select class="form-select" id="thal" name="thal" required data-bs-toggle="tooltip" title="Type of thalassemia (genetic blood disorder)">
                                            <option value="">Select Type</option>
                                            <option value="0">Normal</option>
                                            <option value="1">Fixed Defect</option>
                                            <option value="2">Reversible Defect</option>
                                        </select>
                                        <div class="invalid-feedback">Please select thalassemia type.</div>
                                    </div>
                                </div>

                                <div class="text-center mt-4">
                                    <button type="submit" class="btn-modern btn-primary btn-lg me-3">
                                        <i class="fas fa-brain me-2"></i>Get AI Prediction
                                    </button>
                                    <a href="{% url 'signup' %}" class="btn-modern btn-secondary">
                                        <i class="fas fa-user-plus me-2"></i>Create Account
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
    // Form validation
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        });
    })();

    // Enable tooltips
    document.addEventListener('DOMContentLoaded', function() {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
    </script>
{% endblock %}
